!function(){var i,_=[].slice;function n(t,e){var n,r={}.hasOwnProperty;for(n in e)r.call(e,n)&&(t[n]=e[n]);return t}(i=function(t,e,n,r){return(i.default=!i.default?new i.converter:i.default).convert(t,e,n,r)}).id=function(t){return t.id||t.url||t.name+"@"+t.version+"/"+t.path},i._cache={},i.cache=function(t){var e;return(t="string"==typeof t?{url:t}:t).id||(t.id=i.id(t)),(e=i._cache[t.id])?e:i._cache[t.id]=n({},t)},(i.converter=function(t){return this.scopeTest=(t=null==t?{}:t).scopeTest,this.node=document.createElement("style"),this.iframe=t=document.createElement("iframe"),t.setAttribute("title","for csscope parsing"),t.style.display="none",t.src="about:blank",document.body.appendChild(t),this.iframe.contentDocument.body.appendChild(this.node),this._idx=0,this}).prototype=n(Object.create(Object.prototype),{getNames:function(t,e){var n,r,i;for(null==e&&(e={}),n=0,r=t.length;n<r;++n)(i=t[n]).name?e[i.name]=!0:i.cssRules&&this.getNames(i.cssRules,e);return e},_convert:function(t,i,e,s,n){var r,o,c,u,a,l;for(null==n&&(n={}),r="",o=0,c=t.length;o<c;++o)(u=t[o]).style&&n[u.style.animationName]&&(u.style.animationName=e+"__"+u.style.animationName),u.selectorText?(r+=(a=(s?u.selectorText.split(",").map(h).map(m):u.selectorText.split(",").map(p).map(d)).join(","))+" {\n  "+Array.from(u.style).map(f).join(";")+"\n}",u.selectorText=a):u.name?(a=u.name.split(",").map(y).map(v).join(","),r+="@keyframes "+(u.name=a)+" {\n  "+Array.from(u.cssRules).map(g).join("\n")+"\n}"):u.cssRules&&(l=this._convert(u.cssRules,i,e,s,n),r+="@media "+u.conditionText+" {\n  "+l+"\n}");return r;function p(t){return t.trim()}function d(t){return":scope"===t?i:i+" "+t}function h(t){return t.trim()}function m(t){var e,n,r;return":scope"===t?i:(n=(e=t.split(" ").map(function(t){return t.trim()}).filter(function(t){return t}))[0],r=_.call(e,1),e=/^[a-zA-Z]/.exec(n)?[n,""]:["",n],i+" :not("+s+") "+t+","+i+" > "+e[0]+":not("+s+")"+e[1]+" "+r.join(" "))}function f(t){return t+":"+u.style[t]+("important"===u.style.getPropertyPriority(t)?"!important":"")}function y(t){return t.trim()}function v(t){return e+"__"+t}function g(t){return t.cssText}},convert:function(t,e,n,r){var i="object"==typeof t?t:{name:t,css:e,rule:n,scopeTest:r},t=i.name,e=i.css,n=i.rule,r=i.scopeTest;return n=n||"."+t,t=t||n,r=r||this.scopeTest,i="object"==typeof e?e:(this.node.textContent=(e||"")+("/*"+this._idx++)+"*/",this.node.sheet.rules),e=this.getNames(i,{}),this._convert(i,n,t,r,e)||""}}),(i.manager=function(t){return null==t&&(t={}),this.attrName="csscope",this._cache={},this.converter=new i.converter,this.counter=0,this.registry(t.registry||"/assets/lib/"),this.init(),this}).prototype=n(Object.create(Object.prototype),{cache:function(t){var e;return(t="string"==typeof t?{url:t}:t).id||(t.id=i.id(t)),(e=this._cache[t.id])?e:(e=i._cache[t.id])?this._cache[t.id]=e:this._cache[t.id]=n({},t)},_url:function(t){var e;return"string"==typeof t?t:(e=t.url)?e:this._reg(t)},registry:function(t){return"string"==typeof t?("/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),this._reg=(e=t,function(t){return e+"/"+t.name+"/"+(t.version||"main")+"/"+(t.path||"index.min.js")})):this._reg=t;var e},init:function(){if(!this.inited)return this.inited=!0,this.styleNode=document.createElement("style"),this.styleNode.setAttribute("type","text/css"),this.styleNode.setAttribute("data-name","csscope.manager"),this.styleContent=[],document.body.appendChild(this.styleNode)},scope:function(t,e){e=this.get(e=null==e?[]:e);return t.classList.add.apply(t.classList,e.map(function(t){return t.scope})),e},get:function(t){var e=this;return null==t&&(t=[]),(Array.isArray(t)?t:[t]).map(function(t){return e._url(t)}).map(function(t){return e.cache(t)}).filter(function(t){return t.scope})},load:function(t,n){var r=this;return t=(Array.isArray(t)?t:[t]).map(function(t){return r._url(t)}),Promise.all(t.map(function(t){var e=r.cache(t);return e.inited?Promise.resolve():e.scope&&e.code?Promise.resolve().then(function(){return e.inited=!0,r.styleContent.push(e.code)}):ld$.fetch(t,{method:"GET"},{type:"text"}).then(function(t){return e.code=t,e.inited=!0,e.scope||(e.scope="csp-"+r.counter+++"-"+Math.random().toString(36).substring(2,7)),t=r.converter.convert({css:t,name:e.scope,scopeTest:n}),r.styleContent.push(t)})})).then(function(){return r.styleNode.textContent=r.styleContent.join("\n")}).then(function(){return r.get(t)})}}),"undefined"!=typeof module&&null!==module?module.exports=i:"undefined"!=typeof window&&null!==window&&(window.csscope=i)}.call(this);
